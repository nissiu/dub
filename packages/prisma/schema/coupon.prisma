enum CouponStructure {
  percentage
  flat
}

model Coupon {
  id           String          @id @default(cuid())
  programId    String
  couponId     String?
  couponTestId String?
  name         String
  amount       Int
  type         CouponStructure
  maxDuration  Int? // in months (0 -> one-time, null -> forever)
  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt

  program     Program      @relation(fields: [programId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  // couponCodes CouponCode[]

  @@index(programId)
}

// model CouponCode {
//   id        String   @id @default(cuid())
//   couponId  String
//   code      String
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   coupon Coupon @relation(fields: [couponId], references: [id], onDelete: Cascade, onUpdate: Cascade)

//   @@index(couponId)
// }
